<%- include('../partials/header') %>
<div class="dashboard-wrapper">
    <%- include('../partials/navbar') %>
    <main class="main-content">
        <div class="top-header">
            <div class="header-left">
                 <button id="sidebarCollapse" class="hamburger"><i class="fa-solid fa-bars-staggered"></i></button>
                 <div class="breadcrumb"><h2>Profil Akun</h2></div>
            </div>
        </div>

        <div class="content-card">
            <div class="card-body">
                <form action="/profile/update" method="POST" enctype="multipart/form-data">
                    <div style="display:flex; flex-direction:column; align-items:center; margin-bottom:20px;">
                        <div style="width:100px; height:100px; border-radius:50%; overflow:hidden; border:2px solid var(--neon-blue); margin-bottom:10px;">
                            <img src="<%= userData.profile_pic %>" style="width:100%; height:100%; object-fit:cover;">
                        </div>
                        <input type="file" name="profile_pic" class="form-control" style="width:auto;">
                    </div>

                    <div class="form-group">
                        <label>Nama Lengkap</label>
                        <input type="text" name="fullname" class="form-control" value="<%= userData.fullname %>">
                    </div>
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" name="username" class="form-control" value="<%= userData.username %>">
                    </div>
                    
                    <div class="form-group">
                        <label>Email Status</label>
                        <div style="display:flex; justify-content:space-between; align-items:center; background:rgba(0,0,0,0.2); padding:10px; border-radius:8px;">
                            <span><%= userData.email %></span>
                            <% if(userData.isVerified) { %>
                                <span class="badge bg-success"><i class="fa-solid fa-check-circle"></i> Terverifikasi</span>
                            <% } else { %>
                                <button formaction="/profile/verify-request" class="badge bg-warning border-0">Verifikasi Sekarang</button>
                            <% } %>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Keamanan</label>
                        <a href="/profile/2fa" class="btn-primary" style="text-align:center; display:block; background: #4f46e5;">
                            <i class="fa-solid fa-shield-cat"></i> <%= userData.is2FAEnabled ? 'Kelola 2FA' : 'Aktifkan 2FA' %>
                        </a>
                    </div>

                    <button type="submit" class="btn-primary">Simpan Perubahan</button>
                </form>
            </div>
        </div>
    </main>
</div>
<%- include('../partials/footer') %>