<%- include('../partials/header') %>

<div class="dashboard-wrapper">
    <%- include('../partials/navbar') %>

    <main class="main-content">
        <header class="top-header">
            <div class="header-left">
                <button id="sidebarCollapse" class="hamburger"><i class="fa-solid fa-bars-staggered"></i></button>
                <div class="breadcrumb">
                    <h2>Leaderboard</h2>
                    <span>Peringkat Pengguna Teratas</span>
                </div>
            </div>
        </header>

        <div class="content-card">
            <div class="card-header">
                <h3><i class="fa-solid fa-crown text-warning"></i> Top 20 Sultan Wanzofc</h3>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th style="width: 50px;">#</th>
                                <th>Pengguna</th>
                                <th>Rank</th>
                                <th>Total Saldo</th>
                                <th>Total Deposit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% topUsers.forEach((u, index) => { %>
                                <tr style="<%= u.username === user.username ? 'background:rgba(59,130,246,0.1); border-left:3px solid var(--neon-blue);' : '' %>">
                                    <td>
                                        <% if(index === 0) { %> <span style="font-size:20px;">ðŸ¥‡</span> 
                                        <% } else if(index === 1) { %> <span style="font-size:20px;">ðŸ¥ˆ</span> 
                                        <% } else if(index === 2) { %> <span style="font-size:20px;">ðŸ¥‰</span> 
                                        <% } else { %> <span class="badge bg-secondary"><%= index + 1 %></span> <% } %>
                                    </td>
                                    <td>
                                        <div style="display:flex; align-items:center; gap:12px;">
                                            <img src="<%= u.profile_pic %>" style="width:35px; height:35px; border-radius:50%; border:1px solid var(--glass-border);">
                                            <div>
                                                <div style="font-weight:600;"><%= u.username %> <%= u.username === user.username ? '(Anda)' : '' %></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <% let badgeColor = u.rank === 'Gold' ? 'bg-warning text-dark' : (u.rank === 'Silver' ? 'bg-secondary text-white' : 'bg-info text-white'); %>
                                        <span class="badge <%= badgeColor %>"><%= u.rank %></span>
                                    </td>
                                    <td style="color:#34d399; font-weight:bold;">Rp <%= u.balance.toLocaleString('id-ID') %></td>
                                    <td style="color:var(--text-muted);">Rp <%= (u.totalDeposit || 0).toLocaleString('id-ID') %></td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
</div>

<%- include('../partials/footer') %>