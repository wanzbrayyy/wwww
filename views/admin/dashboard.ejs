<%- include('../partials/header') %>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="dashboard-wrapper">
    <%- include('../partials/navbar') %>

    <main class="main-content">
        <header class="top-header">
            <div style="display:flex;align-items:center;">
                <button id="sidebarCollapse" class="hamburger"><i class="fa-solid fa-bars"></i></button>
                <div class="breadcrumb">
                    <h2>Admin Dashboard</h2>
                    <span>Panel kontrol pusat</span>
                </div>
            </div>
        </header>

        <div class="stats-grid">
            <div class="stat-card blue">
                <div class="stat-icon"><i class="fa-solid fa-users"></i></div>
                <div class="stat-info">
                    <h4>Total User</h4>
                    <h2><%= stats.users %></h2>
                </div>
            </div>
            <div class="stat-card purple">
                <div class="stat-icon"><i class="fa-solid fa-wallet"></i></div>
                <div class="stat-info">
                    <h4>Saldo Jagoanpedia</h4>
                    <h2>Rp <%= stats.providerBalance.toLocaleString('id-ID') %></h2>
                </div>
            </div>
            <div class="stat-card orange">
                <div class="stat-icon"><i class="fa-solid fa-money-bill-trend-up"></i></div>
                <div class="stat-info">
                    <h4>Total Pendapatan</h4>
                    <h2>Rp <%= stats.revenue.toLocaleString('id-ID') %></h2>
                </div>
            </div>
        </div>

        <div class="content-card">
            <div class="card-header">
                <h3><i class="fa-solid fa-chart-line"></i> Statistik Pesanan</h3>
            </div>
            <div class="card-body">
                <canvas id="orderChart" style="max-height: 300px;"></canvas>
            </div>
        </div>
    </main>
</div>

<script>
    const ctx = document.getElementById('orderChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['SMM Orders', 'PPOB Orders'],
            datasets: [{
                label: 'Total Transaksi',
                data: [<%= stats.smm %>, <%= stats.ppob %>],
                backgroundColor: ['#3b82f6', '#8b5cf6'],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            scales: { y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' } }, x: { grid: { display: false } } },
            plugins: { legend: { labels: { color: 'white' } } }
        }
    });
</script>
<%- include('../partials/footer') %>